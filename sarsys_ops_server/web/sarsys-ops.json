{"openapi":"3.0.0","info":{"title":"SarSys Ops Server","description":"SARSys Ops server","version":"0.0.1"},"servers":[{"url":"https://sarsys.app"},{"url":"http://localhost"}],"paths":{"/ops/api/{path}":{"parameters":[{"name":"path","description":"This path variable may contain slashes '/' and may be empty.","in":"path","required":true,"schema":{"type":"string"}}],"get":{"tags":["System"],"summary":"Returns the contents of a file on the server's filesystem.","description":"Content-Type is determined by the suffix of the file.","operationId":"getFile","responses":{"200":{"description":"Successful file fetch.","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"404":{"description":"No file exists at path."}}}},"/ops/api/healthz/alive":{"parameters":[],"get":{"tags":["System"],"operationId":"check","parameters":[],"responses":{"200":{"description":"Successful response."}}}},"/ops/api/healthz/ready":{"parameters":[],"get":{"tags":["System"],"operationId":"check","parameters":[],"responses":{"200":{"description":"Successful response."}}}},"/ops/api/system/status":{"parameters":[],"get":{"tags":["ModuleStatus"],"summary":"Get all modules","operationId":"getAll","parameters":[],"responses":{"200":{"description":"Successful response.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Module"}}}}},"401":{"$ref":"#/components/responses/401"},"403":{"$ref":"#/components/responses/403"},"500":{"$ref":"#/components/responses/500"},"503":{"$ref":"#/components/responses/503"},"504":{"$ref":"#/components/responses/504"}}}},"/ops/api/system/status/{name}":{"parameters":[{"name":"name","in":"path","required":true,"schema":{"type":"string"}}],"get":{"tags":["ModuleStatus"],"summary":"Get module","operationId":"getByName","parameters":[{"name":"name","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Module"}}}},"401":{"$ref":"#/components/responses/401"},"403":{"$ref":"#/components/responses/403"},"500":{"$ref":"#/components/responses/500"},"503":{"$ref":"#/components/responses/503"},"504":{"$ref":"#/components/responses/504"}}}},"/ops/api/services/tracking":{"parameters":[],"get":{"tags":["Tracking"],"summary":"Get TrackingService metadata","description":"Get TrackingService metadata.","operationId":"getMeta","parameters":[{"name":"expand","in":"query","required":false,"allowEmptyValue":false,"schema":{"type":"string"}},{"name":"expand","description":"Expand response with metadata. Legal values are: 'repo'","in":"query"}],"responses":{"200":{"description":"Successful response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackingServiceMeta"}}}},"400":{"$ref":"#/components/responses/400"},"401":{"$ref":"#/components/responses/401"},"403":{"$ref":"#/components/responses/403"},"416":{"$ref":"#/components/responses/416"},"429":{"$ref":"#/components/responses/429"},"500":{"$ref":"#/components/responses/500"},"503":{"$ref":"#/components/responses/503"},"504":{"$ref":"#/components/responses/504"}}},"post":{"tags":["Tracking"],"summary":"Execute command on TrackingService","description":"Execute command on TrackingService.","operationId":"execute","parameters":[{"name":"expand","in":"query","required":false,"allowEmptyValue":false,"schema":{"type":"string"}}],"requestBody":{"description":"TrackingService Command Request","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackingServiceCommand"}}}},"responses":{"200":{"description":"Successful response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackingServiceCommandResult"}}}},"400":{"$ref":"#/components/responses/400"},"401":{"$ref":"#/components/responses/401"},"403":{"$ref":"#/components/responses/403"},"416":{"$ref":"#/components/responses/416"},"429":{"$ref":"#/components/responses/429"},"500":{"$ref":"#/components/responses/500"},"503":{"$ref":"#/components/responses/503"},"504":{"$ref":"#/components/responses/504"}}}}},"components":{"schemas":{"ID":{"type":"string","description":"An id unique in current collection"},"UUID":{"type":"string","description":"A [universally unique identifier](https://en.wikipedia.org/wiki/Universally_unique_identifier).","format":"uuid"},"Module":{"required":["name","instances"],"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","description":"Module name"},"instances":{"type":"array","items":{"required":["name","health"],"type":"object","properties":{"name":{"type":"string","description":"Server instance name"},"status":{"type":"object","properties":{"conditions":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","description":"Server status type"},"status":{"type":"string","description":"Indicates whether that status is applicable, with possible values \"True\", \"False\" or \"Unknown\""},"reason":{"type":"string","description":"Machine-readable, UpperCamelCase text indicating the reason for the status's last transition'"},"message":{"type":"string","description":"Human-readable message indicating details about the last status transition."}},"description":"Server instance condition object"},"description":"Array of server instance condition objects"},"health":{"type":"object","properties":{"alive":{"type":"boolean","description":"Server instance api is alive"},"ready":{"type":"boolean","description":"Server instance api is ready"}},"description":"Server instance api health object"}},"description":"Server instance status object"}},"description":"Server instance object"},"description":"Array of server instance objects"}},"description":"Module status object","readOnly":true},"TrackingServiceMeta":{"type":"object","properties":{"status":{"enum":["none","ready","competing","paused","disposed"],"type":"string","description":"Tracking service status","readOnly":true},"total":{"type":"integer","description":"Total number of tracking objects","readOnly":true},"fractionManaged":{"type":"integer","description":"Number of managed tracking object to total number of tracking objects","readOnly":true},"positions":{"type":"object","properties":{"total":{"type":"integer","description":"Total number of positions heard","readOnly":true},"positionsPerMinute":{"type":"integer","description":"Number of positions processed per minute","readOnly":true},"averageProcessingTimeMillis":{"type":"number","description":"verage processing time in milliseconds","readOnly":true},"lastEvent":{"type":"object","properties":{"uuid":{"type":"string","description":"Globally unique event id","format":"uuid","readOnly":true},"type":{"type":"string","description":"Event Type","readOnly":true},"number":{"type":"integer","description":"Event number in instance stream","readOnly":true},"remote":{"type":"boolean","description":"True if event origin is remote","readOnly":true},"position":{"type":"integer","description":"Event position in canonical (projection or instance) stream","readOnly":true},"timestamp":{"type":"string","description":"When event occurred","format":"date-time","readOnly":true}},"description":"Last event applied to tracking object","readOnly":true}},"description":"Tracking object metadata","readOnly":true},"managerOf":{"type":"array","items":{"type":"object","properties":{"uuid":{"type":"string","description":"Tracking uuid","format":"uuid","readOnly":true},"trackCount":{"type":"integer","description":"Number of tracks in tracking object","readOnly":true},"positionCount":{"type":"integer","description":"Total number of positions in tracking object","readOnly":true},"lastEvent":{"type":"object","properties":{"uuid":{"type":"string","description":"Globally unique event id","format":"uuid","readOnly":true},"type":{"type":"string","description":"Event Type","readOnly":true},"number":{"type":"integer","description":"Event number in instance stream","readOnly":true},"remote":{"type":"boolean","description":"True if event origin is remote","readOnly":true},"position":{"type":"integer","description":"Event position in canonical (projection or instance) stream","readOnly":true},"timestamp":{"type":"string","description":"When event occurred","format":"date-time","readOnly":true}},"description":"Last event applied to tracking object","readOnly":true}},"description":"Tracking object metadata","readOnly":true},"description":"List of metadata for managed tracking objects","readOnly":true},"repository":{"type":"object","properties":{"type":{"type":"string","description":"Repository type","readOnly":true},"lastEvent":{"type":"object","properties":{"uuid":{"type":"string","description":"Globally unique event id","format":"uuid","readOnly":true},"type":{"type":"string","description":"Event Type","readOnly":true},"number":{"type":"integer","description":"Event number in instance stream","readOnly":true},"remote":{"type":"boolean","description":"True if event origin is remote","readOnly":true},"position":{"type":"integer","description":"Event position in canonical (projection or instance) stream","readOnly":true},"timestamp":{"type":"string","description":"When event occurred","format":"date-time","readOnly":true}},"description":"Last event applied to repository","readOnly":true},"queue":{"type":"object","properties":{"pressure":{"type":"object","properties":{"push":{"type":"integer","description":"Number of pending pushes","readOnly":true},"commands":{"type":"integer","description":"Number of pending commands","readOnly":true},"total":{"type":"integer","description":"Total number of pending pushes and commands","readOnly":true},"maximum":{"type":"integer","description":"Maximum allowed queue pressure","readOnly":true},"exceeded":{"type":"boolean","description":"True if maximum queue pressure is exceeded","readOnly":true}},"description":"Repository queue pressure metadata","readOnly":true},"status":{"type":"object","properties":{"idle":{"type":"boolean","description":"True if queue is idle","readOnly":true},"ready":{"type":"boolean","description":"True if queue is ready to process requests","readOnly":true},"disposed":{"type":"boolean","description":"True if queue is disposed","readOnly":true}},"description":"Repository queue status metadata","readOnly":true}},"description":"Repository queue metadata","readOnly":true}},"description":"List of metadata for managed tracking objects","readOnly":true}}},"TrackingServiceCommand":{"type":"object","properties":{"action":{"enum":["add_trackings","remove_trackings"],"type":"string","additionalProperties":false,"description":"Snapshot actions"},"params":{"type":"object","additionalProperties":false,"properties":{"uuids":{"type":"array","items":{"type":"string"},"description":"List of aggregate uuids which command applies to"}},"description":"Command properties"}}},"TrackingServiceCommandResult":{"type":"object","properties":{"meta":{"type":"object","properties":{"status":{"enum":["none","ready","competing","paused","disposed"],"type":"string","description":"Tracking service status","readOnly":true},"total":{"type":"integer","description":"Total number of tracking objects","readOnly":true},"fractionManaged":{"type":"integer","description":"Number of managed tracking object to total number of tracking objects","readOnly":true},"positions":{"type":"object","properties":{"total":{"type":"integer","description":"Total number of positions heard","readOnly":true},"positionsPerMinute":{"type":"integer","description":"Number of positions processed per minute","readOnly":true},"averageProcessingTimeMillis":{"type":"number","description":"verage processing time in milliseconds","readOnly":true},"lastEvent":{"type":"object","properties":{"uuid":{"type":"string","description":"Globally unique event id","format":"uuid","readOnly":true},"type":{"type":"string","description":"Event Type","readOnly":true},"number":{"type":"integer","description":"Event number in instance stream","readOnly":true},"remote":{"type":"boolean","description":"True if event origin is remote","readOnly":true},"position":{"type":"integer","description":"Event position in canonical (projection or instance) stream","readOnly":true},"timestamp":{"type":"string","description":"When event occurred","format":"date-time","readOnly":true}},"description":"Last event applied to tracking object","readOnly":true}},"description":"Tracking object metadata","readOnly":true},"managerOf":{"type":"array","items":{"type":"object","properties":{"uuid":{"type":"string","description":"Tracking uuid","format":"uuid","readOnly":true},"trackCount":{"type":"integer","description":"Number of tracks in tracking object","readOnly":true},"positionCount":{"type":"integer","description":"Total number of positions in tracking object","readOnly":true},"lastEvent":{"type":"object","properties":{"uuid":{"type":"string","description":"Globally unique event id","format":"uuid","readOnly":true},"type":{"type":"string","description":"Event Type","readOnly":true},"number":{"type":"integer","description":"Event number in instance stream","readOnly":true},"remote":{"type":"boolean","description":"True if event origin is remote","readOnly":true},"position":{"type":"integer","description":"Event position in canonical (projection or instance) stream","readOnly":true},"timestamp":{"type":"string","description":"When event occurred","format":"date-time","readOnly":true}},"description":"Last event applied to tracking object","readOnly":true}},"description":"Tracking object metadata","readOnly":true},"description":"List of metadata for managed tracking objects","readOnly":true},"repository":{"type":"object","properties":{"type":{"type":"string","description":"Repository type","readOnly":true},"lastEvent":{"type":"object","properties":{"uuid":{"type":"string","description":"Globally unique event id","format":"uuid","readOnly":true},"type":{"type":"string","description":"Event Type","readOnly":true},"number":{"type":"integer","description":"Event number in instance stream","readOnly":true},"remote":{"type":"boolean","description":"True if event origin is remote","readOnly":true},"position":{"type":"integer","description":"Event position in canonical (projection or instance) stream","readOnly":true},"timestamp":{"type":"string","description":"When event occurred","format":"date-time","readOnly":true}},"description":"Last event applied to repository","readOnly":true},"queue":{"type":"object","properties":{"pressure":{"type":"object","properties":{"push":{"type":"integer","description":"Number of pending pushes","readOnly":true},"commands":{"type":"integer","description":"Number of pending commands","readOnly":true},"total":{"type":"integer","description":"Total number of pending pushes and commands","readOnly":true},"maximum":{"type":"integer","description":"Maximum allowed queue pressure","readOnly":true},"exceeded":{"type":"boolean","description":"True if maximum queue pressure is exceeded","readOnly":true}},"description":"Repository queue pressure metadata","readOnly":true},"status":{"type":"object","properties":{"idle":{"type":"boolean","description":"True if queue is idle","readOnly":true},"ready":{"type":"boolean","description":"True if queue is ready to process requests","readOnly":true},"disposed":{"type":"boolean","description":"True if queue is disposed","readOnly":true}},"description":"Repository queue status metadata","readOnly":true}},"description":"Repository queue metadata","readOnly":true}},"description":"List of metadata for managed tracking objects","readOnly":true}},"description":"TrackingService metadata","readOnly":true},"error":{"type":"object","properties":{"failed":{"type":"array","items":{"type":"string","description":"A [universally unique identifier](https://en.wikipedia.org/wiki/Universally_unique_identifier).","format":"uuid"},"description":"List of aggregate uuids witch command failed on","readOnly":true}},"description":"Error information","readOnly":true}}}},"responses":{"200":{"description":"OK. Indicates that the request has succeeded. A 200 response is cacheable by default. The meaning of a success depends on the HTTP request method."},"201":{"description":"Created. The POST-ed resource was created."},"204":{"description":"No Content. The resource was updated."},"400":{"description":"Bad request. Request contains wrong or is missing required data"},"401":{"description":"Unauthorized. The client must authenticate itself to get the requested response."},"403":{"description":"Forbidden. The client does not have access rights to the content."},"404":{"description":"Not found. The requested resource does not exist in server."},"405":{"description":"Method Not Allowed. The request method is known by the server but has been disabled and cannot be used."},"409":{"description":"Conflict. This response is sent when a request conflicts with the current state of the server."},"416":{"description":"Range Not Satisfiable. Indicates that a server cannot serve the requested ranges. The most likely reason is that the document doesn't contain such ranges, or that the Range header value, though syntactically correct, doesn't make sense."},"426":{"description":"Source or destination resource of a method is locked. Indicates that resource is read-only."},"429":{"description":"Too Many Requests. Indicates the user has sent too many requests in a given amount of time ('rate limiting'). A Retry-After header might be included to this response indicating how long to wait before making a new request."},"500":{"description":"Internal Server Error. indicates that the server encountered an unexpected condition that prevented it from fulfilling the request. This error response is a generic 'catch-all' response"},"503":{"description":"Service unavailable. The server is currently unable to handle the request due to a temporary overloading or maintenance of the server. The implication is that this is a temporary condition which will be alleviated after some delay. If known, the length of the delay MAY be indicated in a Retry-After header."},"504":{"description":"Gateway Timeout server. Indicates that the server, while acting as a gateway or proxy, did not get a response in time from the upstream server that it needed in order to complete the request."}},"parameters":{},"requestBodies":{},"headers":{},"securitySchemes":{"OpenId Connect":{"type":"openID","openIdConnectUrl":"https://id.discoos.io/auth/realms/DISCOOS/.well-known/openid-configuration"}},"callbacks":{}}}
