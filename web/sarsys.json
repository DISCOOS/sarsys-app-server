{"openapi":"3.0.0","info":{"title":"SarSys App Server","description":"API consumed by SarSys apps","version":"0.0.1"},"servers":[{"url":"https://sarsys.app"}],"paths":{"/":{"parameters":[]},"/api/{path}":{"parameters":[{"name":"path","description":"This path variable may contain slashes '/' and may be empty.","in":"path","required":true,"schema":{"type":"string"}}],"get":{"summary":"Returns the contents of a file on the server's filesystem.","description":"Content-Type is determined by the suffix of the file.","operationId":"getFile","responses":{"200":{"description":"Successful file fetch.","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"404":{"description":"No file exists at path."}}}},"/api/healthz":{"parameters":[],"get":{"tags":["Health"],"operationId":"check","parameters":[],"responses":{"200":{"description":"Successful response."}}}},"/api/connect":{"parameters":[]},"/api/app-config":{"parameters":[],"get":{"tags":["AppConfig"],"summary":"Get all application configurations","description":"Get all application configurations. This operation is only allowed for admin users.","operationId":"getAll","parameters":[],"responses":{"401":{"$ref":"#/components/responses/401"},"403":{"$ref":"#/components/responses/403"},"200":{"description":"Successful response.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AppConfig"}}}}}}},"post":{"tags":["AppConfig"],"summary":"Create new application configuration","description":"Create new application configuration. The field [uuid] MUST BE unique for each application. Use a OS-spesific device id or a [universally unique identifier](https://en.wikipedia.org/wiki/Universally_unique_identifier).","operationId":"create","parameters":[],"requestBody":{"description":"New application configuration","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppConfig"}}}},"responses":{"401":{"$ref":"#/components/responses/401"},"403":{"$ref":"#/components/responses/403"},"201":{"$ref":"#/components/responses/201"}}}},"/api/app-config/{uuid}":{"parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string"}}],"get":{"tags":["AppConfig"],"summary":"Get application configuration","description":"Get application configuration. A configuration is unique for each application regardless of which user is logged in.","operationId":"getById","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"401":{"$ref":"#/components/responses/401"},"403":{"$ref":"#/components/responses/403"},"200":{"description":"Successful response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppConfig"}}}}}},"patch":{"tags":["AppConfig"],"summary":"Update application configuration","description":"Update application configuration. Only fields in request are updated. Existing values WILL BE overwritten, others remain unchanged.","operationId":"patch","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Updated application configuration. Only fields in request are updated.","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppConfig"}}}},"responses":{"401":{"$ref":"#/components/responses/401"},"403":{"$ref":"#/components/responses/403"},"204":{"$ref":"#/components/responses/204"},"409":{"$ref":"#/components/responses/409"}}}}},"components":{"schemas":{"AppConfig":{"title":"AppConfig","required":["uuid"],"type":"object","properties":{"uuid":{"type":"string","description":"Unique application id","format":"uuid"},"demo":{"type":"boolean","description":"Use demo-mode (no real data and any login)","default":true},"demoRole":{"enum":["Commander","UnitLeader","Personnel"],"type":"string","description":"Role of logged in user in demo-mode","default":"Commander"},"onboarding":{"type":"boolean","description":"Show onboarding before next login","default":true},"organization":{"type":"integer","description":"Default organization identifier","default":"61"},"division":{"type":"integer","description":"Default division identifier","default":"140"},"department":{"type":"integer","description":"Default department identifier","default":"141"},"talkGroupCatalog":{"type":"string","description":"Default talkgroup name","default":"Oslo"},"storage":{"type":"boolean","description":"Storage access is granted","default":false},"locationWhenInUse":{"type":"boolean","description":"Location access when app is in use is granted","default":false},"mapCacheTTL":{"type":"integer","description":"Number of days downloaded map tiles are cached locally","default":30},"mapCacheCapacity":{"type":"integer","description":"Maximum number map tiles cached locally","default":15000},"locationAccuracy":{"enum":["lowest","low","medium","high","best","bestForNavigation"],"type":"string","description":"Requested location accuracy","default":"high"},"locationFastestInterval":{"type":"integer","description":"Fastest interval between location updates in milliseconds","default":1000},"locationSmallestDisplacement":{"type":"integer","description":"Smallest displacment in meters before update is received","default":3},"keepScreenOn":{"type":"boolean","description":"Keep screen on when maps are displayed","default":false},"callsignReuse":{"type":"boolean","description":"Reuse callsigns for retired units","default":true},"sentryDns":{"type":"string","description":"Sentry DNS for remote error reporting","format":"uri","default":"https://2d6130375010466b9652b9e9efc415cc@sentry.io/1523681"}},"description":"SarSys application configuration"}},"responses":{"201":{"description":"Created. The POST-ed resource was created."},"204":{"description":"No Content. The resource was updated."},"401":{"description":"Unauthorized. The client must authenticate itself to get the requested response."},"403":{"description":"Forbidden. The client does not have access rights to the content."},"404":{"description":"Not found. The requested resource does not exist in server."},"405":{"description":"Method Not Allowed. The request method is known by the server but has been disabled and cannot be used."},"409":{"description":"Conflict. This response is sent when a request conflicts with the current state of the server."},"InsufficientScope":{"description":"The provided credentials or bearer token have insufficient permission to access this route.","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"scope":{"type":"string","description":"The required scope for this operation."}}}}}},"InsufficientAccess":{"description":"The provided credentials or bearer token are not authorized for this request.","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}},"MalformedAuthorizationHeader":{"description":"The provided Authorization header was malformed.","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}},"parameters":{},"requestBodies":{},"headers":{},"securitySchemes":{"id.discoos.io":{"type":"openID","description":"This endpoint requires an identity token passed issed from https://id.discoos.io as a [Bearer token](https://swagger.io/docs/specification/authentication/bearer-authentication/) issued by in an [Authorization header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization).","openIdConnectUrl":"https://id.discoos.io"}},"callbacks":{}}}
